# ç‡Ÿæ¥­é¡æäº¤ç³»çµ±

å¸‚å ´æ“ºæ”¤å•†å®¶çš„ç‡Ÿæ¥­é¡æäº¤èˆ‡æŸ¥è©¢ç³»çµ±ã€‚

## åŠŸèƒ½

- ğŸ“± æ‰‹æ©Ÿè™Ÿç¢¼å¿«é€Ÿç™»å…¥
- ğŸ’° æäº¤ç‡Ÿæ¥­é¡ï¼ˆå«ç§Ÿé‡‘è‡ªå‹•è¨ˆç®—ã€æˆæœ¬è¨˜éŒ„ï¼‰
- ğŸ“Š æŸ¥çœ‹ç‡Ÿæ¥­ç´€éŒ„
- ğŸ“ˆ ç®¡ç†å“¡çµ±è¨ˆå ±è¡¨

---

## å¿«é€Ÿé–‹å§‹

### 1. è¨­å®š Google Sheets

#### 1.1 å»ºç«‹è©¦ç®—è¡¨

1. å‰å¾€ [Google Sheets](https://sheets.google.com) å»ºç«‹æ–°è©¦ç®—è¡¨
2. è¨˜ä¸‹ç¶²å€ä¸­çš„ **Spreadsheet ID**ï¼ˆç¶²å€æ ¼å¼ï¼š`https://docs.google.com/spreadsheets/d/{SPREADSHEET_ID}/edit`ï¼‰

#### 1.2 å»ºç«‹è³‡æ–™è¡¨

åœ¨è©¦ç®—è¡¨ä¸­å»ºç«‹ä»¥ä¸‹ 3 å€‹ Sheetï¼ˆé»æ“Šåº•éƒ¨ `+` æ–°å¢ï¼‰ï¼š

| Sheet åç¨± | ç”¨é€” |
|-----------|------|
| `users` | ä½¿ç”¨è€…è³‡æ–™ |
| `markets` | å¸‚å ´è³‡æ–™ |
| `revenues` | ç‡Ÿæ¥­é¡ç´€éŒ„ |

#### 1.3 å¡«å…¥æ¬„ä½æ¨™é¡Œ

**Sheet: `users`**
```
åç¨±	æ‰‹æ©Ÿ	æ¬Šé™	ç‹€æ…‹	å»ºç«‹æ™‚é–“	id
```

**Sheet: `markets`**
```
åç¨±	åœ°å€	å¹³æ—¥ç§Ÿé‡‘	å‡æ—¥ç§Ÿé‡‘	ç‹€æ…‹	id
```

**Sheet: `revenues`**
```
æ—¥æœŸ	å¸‚å ´	ç‡Ÿæ¥­é¡	ç§Ÿé‡‘	åœè»Šè²»	æ¸…æ½”è²»	å…¶ä»–æˆæœ¬	æ·¨åˆ©	æäº¤è€…	å‚™è¨»	æäº¤æ™‚é–“	id	market_id	submitted_by_phone
```

> ğŸ’¡ **æç¤º**ï¼šå¯ç›´æ¥è¤‡è£½ `seed_data.md` ä¸­çš„æ¸¬è©¦è³‡æ–™è²¼å…¥å„ Sheet

> âš ï¸ **é‡è¦**ï¼š`æ‰‹æ©Ÿ` å’Œ `submitted_by_phone` æ¬„ä½éœ€è¨­ç‚ºã€Œç´”æ–‡å­—ã€æ ¼å¼ï¼Œé¿å…æ‰‹æ©Ÿè™Ÿç¢¼å‰å° 0 è¢«ç§»é™¤

---

### 2. éƒ¨ç½² Google Apps Script

#### 2.1 é–‹å•Ÿ Apps Script

åœ¨ Google Sheets ä¸­ï¼š
1. é»æ“Š **æ“´å……åŠŸèƒ½** â†’ **Apps Script**
2. æœƒé–‹å•Ÿæ–°çš„ Apps Script ç·¨è¼¯å™¨è¦–çª—

#### 2.2 è²¼ä¸Šç¨‹å¼ç¢¼

1. åˆªé™¤é è¨­çš„ `function myFunction() {}` 
2. è¤‡è£½ `gas/Code.gs` çš„å…¨éƒ¨å…§å®¹è²¼ä¸Š
3. **ä¿®æ”¹ç¬¬ 11 è¡Œ**ï¼Œå°‡ `YOUR_SPREADSHEET_ID` æ›¿æ›æˆä½ çš„ Spreadsheet IDï¼š

```javascript
const SPREADSHEET_ID = 'YOUR_SPREADSHEET_ID'; // â† æ”¹é€™è£¡
```

4. æŒ‰ `Ctrl + S` å„²å­˜

#### 2.3 éƒ¨ç½²

1. é»æ“Šå³ä¸Šè§’ **éƒ¨ç½²** â†’ **æ–°å¢éƒ¨ç½²**
2. é»æ“Šé½’è¼ªåœ–ç¤ºï¼Œé¸æ“‡ **ç¶²é æ‡‰ç”¨ç¨‹å¼**
3. è¨­å®šï¼š
   - **èªªæ˜**ï¼šç‡Ÿæ¥­é¡ç³»çµ± API
   - **åŸ·è¡Œèº«ä»½**ï¼šæˆ‘
   - **å­˜å–æ¬Šé™**ï¼š**ä»»ä½•äºº**
4. é»æ“Š **éƒ¨ç½²**
5. é¦–æ¬¡éƒ¨ç½²éœ€è¦æˆæ¬Šï¼Œé»æ“Š **æˆæ¬Šå­˜å–** â†’ é¸æ“‡ä½ çš„ Google å¸³è™Ÿ â†’ **å…è¨±**
6. è¤‡è£½é¡¯ç¤ºçš„ **ç¶²é æ‡‰ç”¨ç¨‹å¼ç¶²å€**ï¼ˆæ ¼å¼ï¼š`https://script.google.com/macros/s/xxx/exec`ï¼‰

> âš ï¸ **æ³¨æ„**ï¼šæ¯æ¬¡ä¿®æ”¹ Code.gs å¾Œï¼Œéœ€è¦é‡æ–°éƒ¨ç½²æ‰æœƒç”Ÿæ•ˆã€‚é»æ“Š **éƒ¨ç½²** â†’ **ç®¡ç†éƒ¨ç½²** â†’ **ç·¨è¼¯** â†’ ç‰ˆæœ¬é¸ã€Œæ–°ç‰ˆã€â†’ **éƒ¨ç½²**

---

### 3. è¨­å®šå‰ç«¯

#### 3.1 å®‰è£ä¾è³´

```bash
cd app
npm install
```

#### 3.2 è¨­å®šç’°å¢ƒè®Šæ•¸

è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”ï¼š

```bash
cp .env.example .env
```

ç·¨è¼¯ `.env`ï¼Œå¡«å…¥ä½ çš„ GAS URLï¼š

```
VITE_GOOGLE_SCRIPT_URL=https://script.google.com/macros/s/ä½ çš„éƒ¨ç½²ID/exec
```

#### 3.3 å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
npm run dev
```

ç€è¦½å™¨é–‹å•Ÿ http://localhost:5173/mtz/

---

### 4. æ¸¬è©¦

ä½¿ç”¨ `seed_data.md` ä¸­çš„æ¸¬è©¦è³‡æ–™ï¼š

| æ‰‹æ©Ÿè™Ÿç¢¼ | å§“å | æ¬Šé™ | é æœŸçµæœ |
|---------|------|------|---------|
| 0912345678 | ç‹å°æ˜ | admin | å¯çœ‹å…¨éƒ¨ç´€éŒ„ + çµ±è¨ˆ |
| 0923456789 | æå°è¯ | user | åªèƒ½çœ‹ç•¶æ—¥è‡ªå·±çš„ |
| 0945678901 | é™³å¤§å‰ | user | ç™»å…¥å¤±æ•—ï¼ˆå·²åœç”¨ï¼‰ |
| 0999999999 | - | - | ç™»å…¥å¤±æ•—ï¼ˆæœªè¨»å†Šï¼‰ |

---

## éƒ¨ç½²åˆ° GitHub Pages

### 1. å»ºç«‹ GitHub Repository

1. å‰å¾€ [GitHub](https://github.com) å»ºç«‹æ–° repoï¼Œåç¨±ç‚º `mtz`
2. ä¸è¦å‹¾é¸ä»»ä½•åˆå§‹åŒ–é¸é …

### 2. è¨­å®š Secrets

åœ¨ GitHub repo ä¸­ï¼š
1. å‰å¾€ **Settings** â†’ **Secrets and variables** â†’ **Actions**
2. é»æ“Š **New repository secret**
3. æ–°å¢ï¼š
   - **Name**: `VITE_GOOGLE_SCRIPT_URL`
   - **Value**: ä½ çš„ GAS ç¶²å€

### 3. è¨­å®š GitHub Pages

1. å‰å¾€ **Settings** â†’ **Pages**
2. **Source** é¸æ“‡ **GitHub Actions**

### 4. Push ç¨‹å¼ç¢¼

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œï¼š

```bash
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/ä½ çš„å¸³è™Ÿ/mtz.git
git push -u origin main
```

Push å¾Œæœƒè‡ªå‹•è§¸ç™¼éƒ¨ç½²ï¼Œå®Œæˆå¾Œå¯åœ¨ä»¥ä¸‹ç¶²å€å­˜å–ï¼š

```
https://ä½ çš„å¸³è™Ÿ.github.io/mtz/
```

---

## å°ˆæ¡ˆçµæ§‹

```
mtz/
â”œâ”€â”€ app/                          # Vue å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ assets/main.css       # å…¨åŸŸæ¨£å¼
â”‚   â”‚   â”œâ”€â”€ components/           # å…±ç”¨çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ PhoneInput.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueFilters.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueForm.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueList.vue
â”‚   â”‚   â”‚   â””â”€â”€ StatsSummary.vue
â”‚   â”‚   â”œâ”€â”€ composables/          # çµ„åˆå‡½æ•¸
â”‚   â”‚   â”‚   â”œâ”€â”€ useApi.ts
â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ router/index.ts       # è·¯ç”±è¨­å®š
â”‚   â”‚   â”œâ”€â”€ types/index.ts        # TypeScript å‹åˆ¥
â”‚   â”‚   â””â”€â”€ views/                # é é¢
â”‚   â”‚       â”œâ”€â”€ LoginView.vue
â”‚   â”‚       â”œâ”€â”€ SubmitView.vue
â”‚   â”‚       â””â”€â”€ HistoryView.vue
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ 404.html              # GitHub Pages SPA è·¯ç”±æ”¯æ´
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ gas/
â”‚   â””â”€â”€ Code.gs                   # Google Apps Script å¾Œç«¯
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ deploy.yml                # GitHub Actions éƒ¨ç½²
â”œâ”€â”€ spec_optimized.md             # æŠ€è¡“è¦æ ¼æ›¸
â””â”€â”€ seed_data.md                  # æ¸¬è©¦è³‡æ–™
```

---

## å¸¸è¦‹å•é¡Œ

### Q: ç™»å…¥æ™‚å‡ºç¾ã€Œç¶²è·¯é€£ç·šéŒ¯èª¤ã€

**å¯èƒ½åŸå› **ï¼š
1. GAS å°šæœªéƒ¨ç½²æˆ–ç¶²å€éŒ¯èª¤
2. `.env` ä¸­çš„ç¶²å€ä¸æ­£ç¢º

**è§£æ±ºæ–¹å¼**ï¼š
1. ç¢ºèª GAS å·²æˆåŠŸéƒ¨ç½²
2. ç¢ºèª `.env` ä¸­çš„ç¶²å€æ­£ç¢ºï¼ˆéœ€åŒ…å« `/exec` çµå°¾ï¼‰
3. é‡æ–°å•Ÿå‹• dev server

### Q: ç™»å…¥æ™‚å‡ºç¾ã€Œæ­¤æ‰‹æ©Ÿè™Ÿç¢¼æœªè¨»å†Šã€

**å¯èƒ½åŸå› **ï¼šGoogle Sheet ä¸­æ²’æœ‰è©²æ‰‹æ©Ÿè™Ÿç¢¼

**è§£æ±ºæ–¹å¼**ï¼šåœ¨ `users` Sheet ä¸­æ–°å¢ä½¿ç”¨è€…è³‡æ–™

### Q: ç¯©é¸æäº¤è€…æ™‚æŸ¥ä¸åˆ°è³‡æ–™

**å¯èƒ½åŸå› **ï¼šæ‰‹æ©Ÿè™Ÿç¢¼æ ¼å¼å•é¡Œï¼ˆå‰å° 0 è¢«ç§»é™¤ï¼‰

**è§£æ±ºæ–¹å¼**ï¼š
1. é¸å– `æ‰‹æ©Ÿ` å’Œ `submitted_by_phone` æ¬„ä½
2. æ ¼å¼ â†’ æ•¸å­— â†’ ç´”æ–‡å­—
3. é‡æ–°è²¼ä¸Šè³‡æ–™

### Q: éƒ¨ç½²å¾Œé é¢ç©ºç™½

**å¯èƒ½åŸå› **ï¼šGitHub Secrets æœªè¨­å®šæˆ–è¨­å®šéŒ¯èª¤

**è§£æ±ºæ–¹å¼**ï¼š
1. ç¢ºèª `VITE_GOOGLE_SCRIPT_URL` Secret å·²è¨­å®š
2. é‡æ–°åŸ·è¡Œ GitHub Actionsï¼ˆActions â†’ é¸æ“‡ workflow â†’ Re-runï¼‰

### Q: ä¿®æ”¹ GAS ç¨‹å¼ç¢¼å¾Œæ²’æœ‰ç”Ÿæ•ˆ

**åŸå› **ï¼šéœ€è¦é‡æ–°éƒ¨ç½²

**è§£æ±ºæ–¹å¼**ï¼š
1. Apps Script ç·¨è¼¯å™¨ â†’ éƒ¨ç½² â†’ ç®¡ç†éƒ¨ç½²
2. ç·¨è¼¯ç¾æœ‰éƒ¨ç½² â†’ ç‰ˆæœ¬é¸ã€Œæ–°ç‰ˆã€â†’ éƒ¨ç½²

---

## æŠ€è¡“æ£§

- **å‰ç«¯**ï¼šVue 3 + TypeScript + Vite
- **UI**ï¼šPrimeVue + Tailwind CSS
- **å¾Œç«¯**ï¼šGoogle Apps Script
- **è³‡æ–™åº«**ï¼šGoogle Sheets
- **éƒ¨ç½²**ï¼šGitHub Pages + GitHub Actions
